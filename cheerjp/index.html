<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Ti-Notes online</title>
        <script src="https://cjrtnc.leaningtech.com/3.0/cj3loader.js"></script>
    </head>
    <body>
        <script>
            (async function () {
                await cheerpjInit();
                cheerpjCreateDisplay(window.innerWidth, window.innerHeight);
                await cheerpjRunJar("/app/ti-project.jar");
            })();
        </script>
        <script>
            //wait for it to load in
            window.addEventListener("load", function () {
                //make sure java.io is there
                if (window.java && window.java.io) {
                    //saves origional
                    const original = window.java.io.FileWriter;
                    //overriding
                    window.java.io.FileWriter = function (path) {
                        //downloading from browser

                        //make the link
                        var content = "test_content";
                        var blob = new Blob([content], {type:'text/plain'});
                        var link = document.createElement('a');
                        link.href = URL.createObjectURL(blob);
                        link.download = "testfile.txt";
                        //click the link
                        document.body.appendChild(link);
                        link.click();
                        document.body.removeChild(link);
                    }
                }
            });
        </script>
    </body>
</html>